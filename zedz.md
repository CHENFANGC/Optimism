---
timezone: Asia/Shanghai
---

---

# {Zedz}

1. 自我介绍
zedz，8月份参与过两次共学，区块链爱好者，重新回来学习。

2. 你认为你会完成本次残酷学习吗？
会

## Notes

<!-- Content_START -->

### 2025.01.06

Optimistic Rollup 概述
Optimism 是一种叫做 “Optimistic Rollup” 的技术。它的核心思想就是，Optimism 这个区块链依赖于另外一个已经存在的区块链（比如以太坊）的安全性和共识机制。简单来说，Optimism 就是把以太坊当作“妈妈区块链”，而它自己是“孩子区块链”。

1. 区块存储
Optimism 把数据存储到以太坊的区块链上，但是采用了特别的方式，这样做可以省钱。数据一旦提交，就无法再修改或删减，这样保证了数据的安全性和完整性。

2. 区块生产
在 Optimism 上，区块的生产是由一个叫做 “sequencer” 的角色来负责。它的工作包括：

确认交易并更新区块链的状态。
创建和执行 Optimism 上的区块。
将交易提交到以太坊区块链上。
这些区块每两秒钟就会生成一次，不管它们是否有交易，或者是空的。

3. 交易提交
交易有两种方式进入 Optimism：

直接提交：这种交易便宜，因为不需要通过以太坊。但是，这些交易不能保证完全公平，因为只有 sequencer 知道它们。
通过以太坊提交：这种方式可以确保交易公平，避免 sequencer 偷偷删减交易。
4. 区块执行
区块的执行由一个叫做 “执行引擎” 来完成。它通过和其他引擎交换信息来更新状态，也可以通过区块链本身来获取信息。虽然后者比较慢，但它能够保证数据的安全性。

5. ETH 和代币的跨链转账
Optimism 允许在不同区块链之间转账，比如从以太坊转到 Optimism，或者从 Optimism 转回以太坊。这个转账过程通过“桥接”来完成。你可以把代币从以太坊转到 Optimism，也可以把它们从 Optimism 取回。

6. 从以太坊到 Optimism
在 Optimism 里面，从以太坊转到 Optimism 的交易叫做 “存款”。这些存款会进入一个特定的区块，几分钟后，Optimism 就会确认这个存款。

7. 从 Optimism 到以太坊
从 Optimism 转到以太坊的操作叫做 “提取”，需要分为三个步骤：

首先发起提取请求。
等待一个新的根状态提交到以太坊。
最后，确认提取请求。
8. 故障证明
在 Optimism 中，数据提交到以太坊后不会立即验证它的正确性，而是会在一定时间内等待挑战。如果没人提出挑战，数据就被认为是正确的；如果有人挑战成功，数据就会被撤回。

### 2025.01.07

1. Layer 2扩容技术概述
随着以太坊的使用量激增，去中心化金融（DeFi）和NFT市场的发展都对以太坊的吞吐量提出了更高的要求。然而，以太坊每秒只能处理不到20笔交易，且高昂的gas费用限制了更多用户的参与。因此，Layer 2 解决方案应运而生，它们能够在以太坊主链（Layer 1）上执行一些计算和存储操作，从而降低费用和提高效率。

Layer 2的扩容方案：

Optimistic Rollup
ZK Rollup
Plasma
Validium
2. 各解决方案的交易费用
文章中的一个核心点是 Gas 费用。下面总结了不同扩容技术方案的费用差异：

ZK Rollup：在 zkSync 上，每笔交易的成本有两个组成部分：链下部分（存储 + SNARK 生成成本）和链上部分（验证成本）。总体来看，ZK Rollup 的交易成本较低，且随着以太坊网络更新，EIP-4488等提案将进一步降低交易费用。

Optimistic Rollup：采用“乐观假设”，所有交易假设是合法的，只有在挑战的情况下才进行验证。Optimism的费用相较于ZK Rollup较高，但其安全性和兼容性方面表现出色。Optimism 在交易中有两个主要成本来源：

L2执行费：这是交易在Layer 2上的执行费用。
L1数据/安全费用：Optimism的所有交易都需提交到以太坊主链，这会引入额外的费用。
zkPorter：zkSync 2.0 提出的 zkPorter 技术通过降低数据可用性成本来大幅降低交易费用。由于zkPorter不依赖于链上数据可用性，它的交易费用预计会比ZK Rollup便宜得多（约为0.03美元）。

3. 交易费用的影响因素
EIP-4488：该提案将大幅降低 Layer 2 Rollup 的成本，特别是对 calldata（数据传输）带来了显著的影响。预计将大幅降低 non-zero calldata 的gas费用。

ZK Rollup和Optimistic Rollup的区别：ZK Rollup通常提供更低的费用和更高的吞吐量，尤其在转账ETH和ERC20代币时。Optimistic Rollup则更侧重于兼容性和安全性，但相较之下，费用较高。

4. ZK Rollup的优势
高扩展性：ZK Rollup在理论上能够提供比Ethereum主网高100倍以上的TPS。例如，ZK Rollup最大可以实现每秒11,818笔交易，远高于Ethereum的101笔TPS。
低成本：由于压缩了数据量，ZK Rollup的费用显著低于传统Ethereum交易。
安全性：ZK Rollup能够通过零知识证明（SNARK）确保安全性，并且其数据验证不依赖于Layer 2的信任模型，而是依赖于Ethereum主链的安全性。
5. 未来发展
随着 Layer 2 方案的不断发展，我们可能会看到更多的应用迁移到 Layer 2 上，以获得更好的用户体验。例如，Uniswap等去中心化交易所（DEX）可能会在ZK Rollup和zkPorter上部署智能合约，提供更低成本的交易。

总结
ZK Rollup 是目前最具扩展性和最低成本的解决方案，尤其适合需要高吞吐量的应用（如DeFi和NFT）。
Optimistic Rollup 提供了更强的兼容性和安全性，适用于更广泛的用例，但其费用相对较高。
zkPorter 预计会成为一种重要的低费用方案，尤其在不需要链上数据可用性的情况下，交易费用可以进一步降低。
随着技术进步和以太坊扩展性提案（如EIP-4488和EIP-4844）的实施，未来Layer 2的费用将大幅降低，从而推动以太坊生态的广泛应用。

---

Rollups的三阶段发展框架
Rollups是以太坊扩展的一种技术，但它们需要逐步去中心化，才能完全做到安全和可靠。为了更好地理解rollups的成熟度，我们将它们分为三个阶段：

第一阶段：完全“辅助轮”
控制权在运营者手中：在这个阶段，rollup完全由运营者控制。
数据根状态在L1上发布：rollup的状态信息会被发布到以太坊主链（L1），方便后期验证和恢复。
透明性高：有软件可以用来重建rollup的状态，任何人都可以审查这个过程，增加系统的可信度。
第二阶段：有限的“辅助轮”
由智能合约治理：rollup开始由智能合约来治理，但可能会保留一个“安全委员会”，用来修复一些问题。
存在欺诈证明系统：如果有不正确的状态根，系统会用欺诈证明来处理。
允许外部验证：至少有5个外部参与者可以提交欺诈证明，保证系统的透明性。
用户可以自己退出：用户在不想继续使用时，可以自己把资产取出，不依赖运营者。
有安全委员会：这个委员会至少有8个成员，通过集体投票来决定系统的重要问题。
第三阶段：完全去中心化
完全去中心化的欺诈证明系统：任何人都可以提交欺诈证明，不再有任何限制。
用户可以有更长时间退出：如果不喜欢系统的升级或变化，用户至少可以有30天的时间退出。
安全委员会的作用有限：安全委员会只能处理系统中出现的严重错误，不能随便干预系统的其他部分。
总结
这个框架帮助我们理解rollups的成长过程。从完全由运营者控制到完全去中心化，它的逐步发展确保了系统的安全和去信任化。这有助于我们评估rollups是否已经准备好成为一个完全安全、无需信任的以太坊扩展解决方案。

### 2025.01.08

摘抄自共学同学的笔记：

- MEV
- Stage
- Tokenomic
- EIP4844

MEV 的定义
Maximal Extractable Value MEV 是利用区块链中交易排序的灵活性，来获取额外经济收益的行为。

MEV 的来源
MEV 的主要来源是 区块链中交易的非确定性排序 ，即矿工或验证者可以决定：

哪些交易进入区块 。
交易的排序顺序 。
是否包含某些交易 。
这种控制能力使得矿工/验证者可以通过交易排序获得经济收益。

MEV 的常见场景
以下是一些典型的 MEV 操作场景：

1. 套利（Arbitrage）
**描述：**在不同去中心化交易所（如 Uniswap 和 SushiSwap）之间，价格可能存在差异，矿工可以通过调整交易顺序执行套利交易。
**例子：**如果在 Uniswap 上 ETH 的价格是 $1000，而在 SushiSwap 上是 $1050，矿工可以优先执行套利交易，赚取差价。
2. 清算（Liquidation）
**描述：**在借贷协议（如 Aave、Compound）中，当借款人的抵押品价值不足时，清算者可以赚取清算奖励。矿工可以优先执行这些清算交易。
**例子：**用户 A 的贷款被触发清算，矿工插入清算交易以获得清算奖励。
3. 三明治攻击（Sandwich Attack）
**描述：**这是 DeFi 中一种常见的 MEV 攻击方式，矿工通过在目标交易前后插入交易来获利。
步骤：
在目标交易之前发送一个买单，抬高价格。
等目标交易执行后，再发送一个卖单，获利。
**结果：**目标交易者将以更高的价格完成交易，而矿工获得利润。
MEV 的影响
1. 对用户的影响
负面：
用户可能因为 MEV 行为（如三明治攻击）而遭受经济损失。
网络拥堵时，Gas 费用可能因 MEV 的竞争而大幅上升。
正面：
某些 MEV 行为（如套利和清算）可以提升市场效率。
2. 对网络的影响
安全性： 高额的 MEV 收益可能导致矿工/验证者之间的不公平竞争，甚至诱发攻击（如自私挖矿）。
去中心化： MEV 的集中化可能会削弱区块链的去中心化特性。
如何缓解 MEV？
为减少 MEV 对生态的负面影响，社区提出了多种解决方案：

1. Flashbots
**描述：**Flashbots 是一个专门用于缓解 MEV 的项目，允许用户和矿工通过专用通道提交交易，避免公开的 Gas 战争。
**作用：**提供一个透明且高效的 MEV 提交系统，减少用户损失。
2. PBS（Proposer-Builder Separation）
**描述：**在以太坊的 PoS 机制下，将区块的提议者（Proposer）与构建者（Builder）分离，降低单一验证者的 MEV 控制力。
3. 去中心化排序协议
**描述：**使用去中心化的排序协议，确保交易顺序的公平性，例如 CowSwap 提出的公平排序机制。
BedRock
Bedrock 是一种与区块链相关的术语，尤其在 Optimism 生态系统中，它特指 Optimism Bedrock ，即 Optimism 网络的下一代升级框架。它是一个技术更新，旨在提高网络的性能、兼容性和可扩展性，同时降低复杂性和成本。

Stage
Stage 的介绍：https://medium.com/l2beat/introducing-stages-a-framework-to-evaluate-rollups-maturity-d290bb22befe

stage简单看来就是对于Rollup系统的一个评估体系。

那三阶段分别是什么？

第0阶段：作者自娱自乐级。我开发了一个rollup链，我要开源一个“挖矿软件”让别人也能共同维护链上（状态根）。

第1阶段：我把软件的功能转移到智能合约上，就比如说状态根的验证这个环节，不再是在各个节点本地验证了，转而用智能合约。同时保留了安全委员会维护bug。注意需要有完整的验证,欺诈证明,退出机制且不受安全委员会干扰。

第2阶段：rollup完全由合约控制，充足的推出时间（对于不想升级软件的节点），安全委员会仅解决链上裁决的正确性错误，用户免受治理攻击。

那op属于哪一个？

stage1 https://www.tradingview.com/news/cointelegraph:124d04da9094b:0-optimism-reaches-stage-1-decentralization-implementing-fault-proofs/


stage的意思，事物发展的阶段，等级，在这里就是一个判断框架，目的就是来判断评估 Rollups 项目，处于那个阶段，以便让用户知道，它的去中心化程度。分为以下三个阶段：

第0️⃣阶段：由操作员运行，有一个开源可用软件。

第1️⃣阶段：由操作员运行，升级为智能合约运行，保留一个安全委员会，解决少部分问题，OP是用的故障证明。

第2️⃣阶段：完全由智能合约运行，安全委员会非必要不干涉，除了重大问题。

tokenomic
1. OP 代币的主要用途

OP 代币在 Optimism 网络中的主要用途包括：

治理：OP 代币持有者可以参与 Optimism 网络的治理。通过投票，社区成员可以决定关于网络升级、协议改进、资金分配等重要事项。
激励：为了激励网络中的参与者，OP 代币会用于奖励验证节点、开发者和用户。
费用支付：OP 代币用于支付网络中的交易费用。
2. OP 代币的分配

OP 代币的初始分配计划如下：

空投（Airdrop）：OP 代币通过空投的方式分发给早期用户，旨在激励社区参与，并帮助更广泛的用户了解和使用 Optimism。
社区奖励：一部分 OP 代币会分配给社区成员作为激励措施，激励他们参与 Optimism 的治理和网络安全等活动。
团队和合作伙伴：一部分 OP 代币会分配给 Optimism 的创始团队、投资者和合作伙伴。
DAO资金池：Opitmism 将建立一个去中心化自治组织（DAO），其资金池用于资助网络的持续发展和其他生态系统的支持。
3. 治理机制

Optimism 的治理机制是基于 Optimism Collective，这是一个由代币持有者和项目参与者共同治理的机制。具体治理过程如下：

OP 代币持有者：通过持有 OP 代币，用户可以对提案进行投票，决策包括协议升级、资金分配、奖励机制等。

治理的两阶段流程

：

意向阶段（Idea Phase）：社区成员提出改进提案，并进行讨论。
决策阶段（Decision Phase）：最终的治理提案将在 DAO 里进行投票，所有 OP 持有者都有参与权。
4. 经济激励

OP 代币的经济激励设计包括：

L2 网络安全：为了确保 Optimism 的安全，验证者和节点运营商需要提供质押的 OP 代币作为担保。任何恶意行为或欺诈行为将导致质押的 OP 代币被扣除。
奖励机制：参与 Optimism 网络的开发者、社区成员、以及其他网络提供者将根据他们的贡献（如代码贡献、开发 dApp、参与治理等）获得 OP 代币奖励。
5. 代币的通胀机制

激励分配

：OP 代币的分配并非一次性完成，而是采取

逐步释放

的方式，以确保代币的供应能根据网络的需求逐渐增加。激励措施包括：

每年一定数量的 OP 代币会释放给参与网络治理、开发和维护的社区成员。
部分 OP 代币将作为奖励发放给网络节点和安全参与者，确保网络的持续运作和安全。
6. 长期目标和去中心化进程

Optimism 希望通过以下措施逐步实现全面去中心化：

更多参与：OP 代币的治理机制将逐步增强社区的参与度，确保更多的用户、开发者和节点有机会对网络进行治理。
去中心化开发：随着网络的发展，更多的开发者和第三方应用将能够在 Optimism 上进行部署，进一步推动其生态系统的发展。
逐步减少中心化控制：通过 DAO 机制，Optimism 将逐步减少对中心化控制的依赖，确保协议的完全去中心化。
7. 持续发展与生态建设

Optimism 还通过 OP基金会 和其他生态系统项目来推动生态建设。代币的激励和治理机制将鼓励更多的开发者参与到 Optimism Rollup 上，带来更多的应用场景和用户。

EIP4844
blob不参与以太坊状态计算！ 用状态根代替

简单说来就是引入Blob存储并降低其gas

提高 Layer 2 扩展性：减少通过以太坊主链传递数据的成本，尤其是 Optimistic Rollups 和 ZK-Rollups。

降低交易费用：通过引入新的交易格式，减少 Rollup 相关的交易费用，这将极大地影响到网络上交易的成本，特别是 Rollup 中的数据传输。

为分片（Sharding）铺路：为未来的以太坊 分片机制（即以太坊 2.0）做好准备，进一步提升网络的扩展性。

### 2025.01.09

### 2025.01.10

### 2025.01.11

### 2025.01.12

### 2025.01.13

### 2024.01.14

### 2024.01.15

### 2024.01.16

### 2024.01.17

### 2024.01.18

### 2024.01.19

### 2024.01.20

### 2024.01.21

### 2024.01.22

### 2024.01.23

### 2024.01.24

### 2024.01.25

### 2024.01.26


<!-- Content_END -->
